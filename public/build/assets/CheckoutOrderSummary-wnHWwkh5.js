import{j as g,y as w,z as k,o as i,c as r,F as y,r as b,a as t,t as o,u as s,A as C,_ as B,G as M,N as z,k as v,B as D,K as I,L as N,D as V,b as x,e as F,d as L,$ as T,f as q,W as E}from"./app-C80njdUk.js";import{a as U}from"./CheckoutShippingAddress-BwT1kouW.js";import{r as X}from"./TrashIcon-5fAp4FnD.js";const G={class:"space-y-4 mt-3 transition duration-300"},H={class:"text-slate-950 text-base font-medium leading-normal"},K={class:"space-y-2 divide-y divide-slate-200"},R={class:"w-[72px] h-[95px]"},W=["src"],Y={class:"flex flex-col gap-1 w-full"},J={class:"text-primary text-xs font-normal leading-none"},Q={class:"text-slate-950 text-base font-normal leading-normal"},Z={class:"flex flex-wrap justify-between items-center gap-3"},tt={class:"flex items-center gap-1"},et={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},st={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},ot={class:"text-slate-800 text-base font-normal leading-normal"},Ht={__name:"checkoutProducts",setup(h){g();const c=w(),e=k();return(d,m)=>(i(),r("div",G,[(i(!0),r(y,null,b(s(e).checkoutProducts,n=>(i(),r("div",{key:n.shop_id,class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},[t("div",H,o(n.shop_name),1),t("div",K,[(i(!0),r(y,null,b(n.products,l=>(i(),r("div",{key:l.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[t("div",R,[t("img",{src:l.thumbnail,class:"w-full h-full object-contain"},null,8,W)]),t("div",Y,[t("div",J,o(l.brand),1),t("div",Q,o(l.name),1),t("div",Z,[t("div",tt,[t("div",et,o(l.size),1),t("div",st,o(l.color),1)]),t("div",ot,o(l.quantity)+" X "+o(s(c).showCurrency(l.discount_price>0?l.discount_price:l.price)),1)])])]))),128))])]))),128))]))}},at={class:"space-y-4 mt-3 transition duration-300"},nt={class:"space-y-2 divide-y divide-slate-200"},lt={class:"flex gap-4 justify-start w-full items-center pt-1"},it={class:"w-[72px] h-[95px]"},rt=["src"],ct={class:"flex flex-col gap-1 w-full"},dt={class:"text-slate-950 text-base font-normal leading-normal"},ut={class:"flex flex-wrap justify-between items-center gap-3"},_t={class:"text-slate-800 text-base font-normal leading-normal"},Kt={__name:"checkoutServices",setup(h){g();const c=w(),e=C();return(d,m)=>(i(),r("div",at,[(i(!0),r(y,null,b(s(e).services,n=>(i(),r("div",{key:n.id,class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},[t("div",nt,[t("div",lt,[t("div",it,[t("img",{src:n.service.thumbnail,class:"w-full h-full object-contain"},null,8,rt)]),t("div",ct,[t("div",dt,o(n.service.name),1),t("div",ut,[m[0]||(m[0]=t("div",null,null,-1)),t("div",_t,o(n.quantity)+" X "+o(s(c).showCurrency(n.service.discounted_price>0?n.service.discounted_price:n.service.price)),1)])])])])]))),128))]))}},mt={class:"p-6 bg-white rounded-2xl border border-slate-200"},pt={class:"text-slate-950 text-xl font-medium leading-7"},ht={class:"my-4 flex justify-between gap-4"},ft={class:"text-slate-950 text-base font-normal leading-normal"},vt={class:"text-slate-950 text-base font-normal leading-normal"},xt={class:"my-4 flex justify-between gap-4"},yt={class:"text-slate-950 text-base font-normal leading-normal"},bt={class:"text-slate-950 text-base font-normal leading-normal"},gt={class:"my-4 flex justify-between gap-4"},wt={class:"text-slate-950 text-base font-normal leading-normal"},$t={class:"text-slate-950 text-base font-normal leading-normal"},kt={class:"my-4 flex justify-between gap-4"},Ct={class:"text-red-500 text-base font-normal leading-normal"},St={class:"text-slate-950 text-base font-normal leading-normal"},jt={class:"my-4 flex justify-between gap-4"},Pt={class:"text-slate-950 text-base font-normal leading-normal"},Ot={class:"text-slate-950 text-base font-normal leading-normal"},At={class:"my-4 flex justify-between gap-4"},Bt={class:"text-slate-950 text-base font-normal leading-normal"},Mt={class:"text-slate-950 text-base font-normal leading-normal"},zt={class:"my-4 flex justify-between gap-4"},Dt={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},It={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Nt={class:"p-4 mt-6 bg-slate-100 rounded-xl"},Vt={class:"text-black text-base font-normal leading-normal"},Ft={class:"relative mt-2"},Lt=["placeholder"],Tt={class:"absolute top-1/2 -translate-y-1/2 left-3"},qt=["disabled"],Et={__name:"CheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(h){new M;const c=C(),e=k(),d=w(),m=g(),n=z(),l=v(!1),_=v(""),p=v(!1),f=h;D(()=>{_.value=e.coupon_code});const S=()=>{_.value.length>0&&$()},j=()=>{_.value="",l.value=!1,e.coupon_code="",$()},P={component:E,props:{title:"Order Placed",message:"Your order has been placed successfully."}},O=()=>{if(!e.address){n.error("Please select shipping address",{position:"bottom-left"});return}if(f.paymentMethod==null){n.error("Please select payment method",{position:"bottom-left"});return}e.checkoutProducts.length+c.total>0?(p.value=!0,axios.post("v1/place-order",{shop_ids:e.selectedShopIds,address_id:e.address.id,payment_method:f.paymentMethod,coupon_code:_.value,note:f.note},{headers:{Authorization:m.token}}).then(a=>{e.checkoutProducts=[],e.selectedShopIds=[],e.coupon_code="",e.total_amount=0,e.delivery_charge=0,e.coupon_discount=0,e.payable_amount=0,e.fetchCart(),n(P,{type:"default",hideProgressBar:!0,icon:!1,position:"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});let u=a.data.data.order_payment_url;if(u!=null){window.location.href=u;return}else e.showOrderConfirmModal=!0}).catch(()=>{}).finally(()=>{p.value=!1})):n.error("Please select at least one product",{position:"bottom-left"})},$=()=>{axios.post("/cart/checkout",{shop_ids:e.selectedShopIds,coupon_code:_.value},{headers:{Authorization:m.token}}).then(a=>{l.value=a.data.data.apply_coupon,e.total_amount=a.data.data.checkout.total_amount,e.delivery_charge=a.data.data.checkout.delivery_charge,e.coupon_discount=a.data.data.checkout.coupon_discount,e.payable_amount=a.data.data.checkout.payable_amount,l.value?(n.success(a.data.message,{position:"bottom-left"}),e.coupon_code=_.value):(n.error(a.data.message,{position:"bottom-left"}),e.coupon_code="")}).catch(a=>{n.error(a.response.data.message,{position:"bottom-left"})})};return(a,u)=>(i(),r("div",null,[t("div",mt,[t("div",pt,o(a.$t("Order Summary")),1),t("div",ht,[t("div",ft,o(a.$t("Products")),1),t("div",vt,o(s(d).showCurrency(s(e).total_amount)),1)]),t("div",xt,[t("div",yt,o(a.$t("Services")),1),t("div",bt,o(s(d).showCurrency(s(c).total_amount)),1)]),t("div",gt,[t("div",wt,o(a.$t("Subtotal")),1),t("div",$t,o(s(d).showCurrency(s(e).total_amount+s(c).total_amount)),1)]),t("div",kt,[t("div",Ct,o(a.$t("Discount")),1),t("div",St," -"+o(s(d).showCurrency(s(e).coupon_discount)),1)]),u[1]||(u[1]=t("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),t("div",jt,[t("div",Pt,o(a.$t("Subtotal After Discount")),1),t("div",Ot,o(s(d).showCurrency((s(e).total_amount+s(c).total_amount-s(e).coupon_discount).toFixed(2))),1)]),t("div",At,[t("div",Bt,o(a.$t("Shipping Charge")),1),t("div",Mt,o(s(d).showCurrency(s(e).delivery_charge)),1)]),u[2]||(u[2]=t("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),t("div",zt,[t("div",Dt,o(a.$t("Total Payable")),1),t("div",It,o(s(d).showCurrency(s(e).total_amount+s(c).total_amount+s(e).delivery_charge-s(e).coupon_discount)),1)]),t("div",Nt,[t("div",Vt,o(a.$t("Have a coupon"))+"? ",1),t("div",Ft,[I(t("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=A=>_.value=A),class:V(["formInputCoupon pr-14 p-3",l.value?"text-green-500 pl-10":""]),placeholder:a.$t("Enter coupon code")},null,10,Lt),[[N,_.value]]),l.value?(i(),r("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:j},[x(s(X),{class:"w-6 h-6 text-red-500"})])):(i(),r("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:S},[x(s(F),{class:"w-6 h-6 text-white"})])),t("span",Tt,[l.value?(i(),L(s(T),{key:0,class:"w-6 h-6 text-green-500"})):q("",!0)])])])]),t("button",{class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",disabled:p.value,onClick:O},o(p.value?a.$t("Placing Order..."):a.$t("Place Order")),9,qt),x(U)]))}},Rt=B(Et,[["__scopeId","data-v-2bd6f631"]]);export{Rt as C,Ht as _,Kt as a};
