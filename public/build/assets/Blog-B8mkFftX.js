import{D as C,J as P,j as l,L as D,m as M,K as k,g as R,o,c as r,a as s,t,p as F,u as d,M as I,N as T,b as f,O as z,h as E,f as v,F as b,d as q,l as L}from"./app-BbUmsuxO.js";import{_ as O}from"./BlogCard-Bu9A1KZ1.js";import{b as U}from"./blog-banner-BfFILLUb.js";import"./ArrowRightIcon-DHYzSr20.js";const H={class:"text-white text-3xl sm:text-4xl font-bold text-center"},J={class:"main-container py-14"},K={class:"w-full bg-white rounded-lg border border-slate-100 p-1 md:p-2 xl:p-3"},A={class:"relative overflow-hidden grow"},G=["placeholder"],Q={key:0,class:"flex mt-1 justify-between items-center w-full gap-4 flex-wrap"},W={key:0},X={key:1},Y={key:2},Z={key:1,class:"mt-8 grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-6 items-start"},ee={key:2},te={class:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 items-start"},se={class:"flex justify-between items-center w-full mt-8 gap-4 flex-wrap"},ae={class:"text-slate-800 text-base font-normal leading-normal"},de={__name:"Blog",setup(oe){const $=C(),p=new P,u=l(1),g=l(12);l(0);const h=l(0),S=l([]),w=l([]),a=D(),c=l({}),y=l(""),_=l(!0);M(()=>{if(c.value={...a.query},!$.multiVendor){p.push("/");return}m(),window.scrollTo(0,0)});const V=async e=>{u.value=e,m()},x=()=>{if(c.value.search=y.value.trim(),c.value.search)p.push({query:{...a.query,search:c.value.search}});else{const{search:e,...n}=a.query;p.push({query:n})}m()},m=async()=>{axios.get("/blogs",{params:{page:u.value,per_page:g.value,filter:c.value}}).then(e=>{h.value=e.data.data.total,w.value=e.data.data.posts}).catch(e=>{console.error("Error fetching blogs:",e)}).finally(()=>{_.value=!1})},B=k(()=>Object.keys(a.query).some(e=>a.query[e])),N=()=>{c.value={},p.push({query:{}}),m()};return k(()=>!!a.query.search),(e,n)=>{const j=R("vue-awesome-paginate");return o(),r(b,null,[s("div",{class:"hero-section bg-cover bg-center h-72 flex items-center justify-center",style:F({backgroundImage:`url(${d(U)})`,backgroundSize:"cover",backgroundPosition:"center"})},[s("h1",H,t(e.$t("evtopia1"))+" "+t(e.$t("News and Insights")),1)],4),s("div",J,[s("div",K,[s("div",A,[I(s("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=i=>y.value=i),placeholder:e.$t("Search Blog"),class:"px-2 py-3 block rounded-lg border border-slate-200 focus:border-primary w-full placeholder:text-gray-400 outline-none text-base font-normal leading-normal",onInput:x},null,40,G),[[T,y.value]]),s("button",{class:"bg-primary-600 h-full w-14 border-none absolute right-0 top-0 rounded-r-lg flex items-center justify-center",onClick:x},[f(d(z),{class:"w-6 h-6 text-white"})])])]),B.value?(o(),r("div",Q,[s("div",null,[E(t(e.$t("Search Results"))+" ",1),d(a).query.search?(o(),r("span",W,t(e.$t("for"))+' "'+t(d(a).query.search)+'" ',1)):v("",!0),d(a).query.category_id?(o(),r("span",X,t(e.$t("for category with id"))+' "'+t(d(a).query.category_id)+'" ',1)):v("",!0),d(a).query.tag_id?(o(),r("span",Y,t(e.$t("with tag id"))+' "'+t(d(a).query.tag_id)+'" ',1)):v("",!0)]),s("div",null,[s("button",{class:"text-red-500 rounded-lg py-2 px-4 hover:text-red-700 transition duration-300",onClick:N},t(e.$t("Reset Search")),1)])])):v("",!0),_.value?(o(),r("div",Z,[(o(!0),r(b,null,q(g.value,i=>(o(),r("div",{key:`skeleton-${i}`,class:"animate-pulse"},n[2]||(n[2]=[L('<div class="bg-white shadow-md rounded-lg p-4"><div class="h-60 bg-gray-200 rounded"></div><div class="mt-4 h-8 bg-gray-200 rounded"></div><div class="mt-2 h-8 bg-gray-200 rounded"></div><div class="mt-2 h-8 w-3/4 bg-gray-200 rounded"></div></div>',1)])))),128))])):(o(),r("div",ee,[s("div",te,[(o(!0),r(b,null,q(w.value,i=>(o(),r("div",{key:i.id,class:"w-full"},[f(O,{post:i},null,8,["post"])]))),128))]),s("div",se,[s("div",ae,t(e.$t("Showing"))+" "+t(g.value*(u.value-1)+1)+" "+t(e.$t("to"))+" "+t(g.value*(u.value-1)+S.value.length)+" "+t(e.$t("of"))+" "+t(h.value)+" "+t(e.$t("results")),1),s("div",null,[f(j,{"total-items":h.value,"items-per-page":g.value,type:"button","hide-prev-next-when-ends":!0,"max-pages-shown":5,modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=i=>u.value=i),onClick:V},null,8,["total-items","items-per-page","modelValue"])])])]))])],64)}}};export{de as default};
