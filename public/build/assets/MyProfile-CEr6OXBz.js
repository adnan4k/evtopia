import{_ as be,P as ye,j as ge,k as f,m as xe,l as ke,h as $e,o as n,c as u,b as g,a as l,a7 as we,t as r,i as Ve,u as Me,a8 as Pe,f as i,M as p,N as v,n as m,U as Ue,Z as Ce}from"./app-fH_uWLu5.js";import{_ as Ee}from"./AuthPageheader-lbXrUvwK.js";const Se={class:"p-3 md:p-4 xl:p-6"},De={class:"max-w-[920px] mx-auto bg-white rounded-xl md:rounded-2xl p-3 md:p-4 xl:p-6"},Ne={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},Be={class:"text-primary text-sm font-medium"},je={class:"flex flex-col gap-2 justify-center items-center"},Ae=["src"],Te={class:"flex gap-2"},Fe={for:"upload",class:"text-white text-sm font-normal px-2 py-1 md:px-3 md:py-2 bg-slate-800 rounded-md cursor-pointer"},Ye={class:"p-3 bg-white rounded-xl border border-slate-100 mt-3"},ze={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Le={for:"name",class:"form-label"},Oe=["placeholder"],Re={key:0,class:"text-red-500 text-sm"},Ge={for:"name",class:"form-label mb-2"},Ie={key:0,class:"text-red-500 text-sm"},Ze={for:"phone",class:"form-label"},qe={class:"flex"},He={class:"text-slate-700 text-base font-normal leading-normal bg-slate-100 p-2 border-y border-l rounded-tl-lg rounded-bl-lg flex items-center"},Je=["placeholder"],Ke={key:0,class:"text-red-500 text-sm"},Qe={for:"gender",class:"form-label bg-transparent"},We={value:"",disabled:"",selected:""},Xe={value:"male"},el={value:"female"},ll={value:"other"},al={key:0,class:"text-red-500 text-sm"},tl={for:"date",class:"form-label"},ol={key:0,class:"text-red-500 text-sm"},rl={key:0,class:"text-red-500 text-sm"},sl={key:0,class:"text-red-500 text-sm"},dl={key:0,class:"text-red-500 text-sm"},nl={key:0,class:"text-red-500 text-sm"},ul={key:0,class:"text-red-500 text-sm"},il={type:"submit",class:"bg-primary px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-white mt-6"},pl={__name:"MyProfile",setup(ml){var k,$,w,V,M,P,U,C,E,S,D,N,B,j,A,T;const x=ye(),d=ge(),e=f(null),_=f(null),b=f(!1),me=()=>{var t;_.value=(t=d.user)==null?void 0:t.profile_photo,b.value=!1},ve=t=>{_.value=URL.createObjectURL(t.target.files[0]),a.value.profile_photo=t.target.files[0],b.value=!0};console.log("Auth Store : ",d.user);const a=f({name:(k=d.user)==null?void 0:k.name,phone:($=d.user)==null?void 0:$.phone,make:(V=(w=d.user)==null?void 0:w.vehicle)==null?void 0:V.make,model:(P=(M=d.user)==null?void 0:M.vehicle)==null?void 0:P.model,year:(C=(U=d.user)==null?void 0:U.vehicle)==null?void 0:C.year,gender:(E=d.user)!=null&&E.gender?(S=d.user)==null?void 0:S.gender:"",date_of_birth:(D=d.user)==null?void 0:D.date_of_birth,email:(N=d.user)==null?void 0:N.email,service_date:(j=(B=d.user)==null?void 0:B.vehicle)==null?void 0:j.service_date,profile_photo:null,phone_code:(A=d.user)==null?void 0:A.phone_code,country:(T=d.user)==null?void 0:T.country}),y=f([]),ce=f(!1);xe(()=>{var t,o;d.user&&(_.value=(t=d.user)==null?void 0:t.profile_photo),window.scrollTo(0,0),((o=d.user)==null?void 0:o.email)==="user@readyecommerce.com"&&(ce.value=!0),fe()}),ke(()=>a.value.country,t=>{const o=y.value.find(c=>c.name==t);a.value.phone_code=o==null?void 0:o.phone_code});const fe=()=>{axios.get("/countries").then(t=>{y.value=t.data.data.countries})},he={component:Ce,props:{title:"Profile Updated",message:"Your profile updated successfully"}},_e=()=>{const t=new FormData;t.append("name",a.value.name),t.append("phone",a.value.phone),t.append("gender",a.value.gender?a.value.gender:""),t.append("date_of_birth",a.value.date_of_birth?a.value.date_of_birth:""),t.append("email",a.value.email?a.value.email:""),t.append("country",a.value.country?a.value.country:""),t.append("phone_code",a.value.phone_code?a.value.phone_code:""),t.append("make",a.value.make?a.value.make:""),t.append("model",a.value.model?a.value.model:""),t.append("year",a.value.year?a.value.year:""),t.append("service_date",a.value.service_date?a.value.service_date:""),a.value.profile_photo&&t.append("profile_photo",a.value.profile_photo),axios.post("/update-profile",t,{headers:{Authorization:d.token}}).then(o=>{d.user=o.data.data.user,b.value=!1,x(he,{type:"default",hideProgressBar:!0,icon:!1,position:"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),e.value={}}).catch(o=>{var c,h;e.value=o.response.data.errors,(c=e.value)!=null&&c.profile_photo&&x.error((h=e.value)==null?void 0:h.profile_photo[0],{position:"bottom-left"})})};return(t,o)=>{var h,F,Y,z,L,O,R,G,I,Z,q,H,J,K,Q,W,X,ee,le,ae,te,oe,re,se,de,ne,ue,ie,pe;const c=$e("v-select");return n(),u("div",null,[g(Ee,{title:t.$t("My Profile")},null,8,["title"]),l("div",Se,[l("form",{onSubmit:o[10]||(o[10]=we(s=>_e(),["prevent"]))},[l("div",De,[l("div",Ne,[l("div",Be,r(t.$t("Profile Picture")),1),l("div",je,[l("img",{src:_.value,alt:"",class:"w-24 h-24 md:w-36 md:h-36 bg-white rounded-full object-cover"},null,8,Ae),l("div",Te,[l("label",Fe,[l("input",{type:"file",id:"upload",class:"hidden",onChange:ve},null,32),Ve(" "+r(t.$t("Change Photo")),1)]),b.value?(n(),u("button",{key:0,class:"px-2 py-1 md:px-3 md:py-2 bg-red-500 text-white rounded-md",onClick:me},[g(Me(Pe),{class:"w-5 h-5"})])):i("",!0)])])]),l("div",Ye,[l("div",ze,[l("div",null,[l("label",Le,r(t.$t("Name")),1),p(l("input",{type:"text",id:"name","onUpdate:modelValue":o[0]||(o[0]=s=>a.value.name=s),placeholder:t.$t("Enter name"),class:m(["form-input",e.value&&((h=e.value)!=null&&h.name)?"border-red-500":"border-slate-200"])},null,10,Oe),[[v,a.value.name]]),e.value&&((F=e.value)!=null&&F.name)?(n(),u("span",Re,r((Y=e.value)==null?void 0:Y.name[0]),1)):i("",!0)]),l("div",null,[l("label",Ge,r(t.$t("Country")),1),g(c,{options:y.value,label:"name",reduce:s=>s.name,modelValue:a.value.country,"onUpdate:modelValue":o[1]||(o[1]=s=>a.value.country=s),placeholder:t.$t("Select Country")},null,8,["options","reduce","modelValue","placeholder"]),e.value&&((z=e.value)!=null&&z.country)?(n(),u("span",Ie,r((L=e.value)==null?void 0:L.country[0]),1)):i("",!0)]),l("div",null,[l("label",Ze,r(t.$t("Mobile Number")),1),l("div",qe,[l("span",He," +"+r(a.value.phone_code||"00"),1),p(l("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>a.value.phone=s),placeholder:t.$t("Enter phone number"),class:m(["text-base font-normal w-full p-3 placeholder:text-slate-400 rounded-tr-lg rounded-br-lg border focus:border-primary outline-none",(O=e.value)!=null&&O.phone?"border-red-500":"border-slate-200"])},null,10,Je),[[v,a.value.phone]])]),e.value&&((R=e.value)!=null&&R.phone)?(n(),u("span",Ke,r((G=e.value)==null?void 0:G.phone[0]),1)):i("",!0)]),l("div",null,[l("label",Qe,r(t.$t("Gender")),1),p(l("select",{name:"gender",id:"gender","onUpdate:modelValue":o[3]||(o[3]=s=>a.value.gender=s),class:m(["form-input bg-transparent h-[52px]",e.value&&((I=e.value)!=null&&I.gender)?"border-red-500":"border-slate-200"])},[l("option",We,r(t.$t("Select a gender")),1),l("option",Xe,r(t.$t("Male")),1),l("option",el,r(t.$t("Female")),1),l("option",ll,r(t.$t("Other")),1)],2),[[Ue,a.value.gender]]),e.value&&((Z=e.value)!=null&&Z.gender)?(n(),u("span",al,r((q=e.value)==null?void 0:q.gender[0]),1)):i("",!0)]),l("div",null,[l("label",tl,r(t.$t("Date of Birth")),1),p(l("input",{type:"date",id:"date","onUpdate:modelValue":o[4]||(o[4]=s=>a.value.date_of_birth=s),class:m(["form-input",e.value&&((H=e.value)!=null&&H.date_of_birth)?"border-red-500":"border-slate-200"])},null,2),[[v,a.value.date_of_birth]]),e.value&&((J=e.value)!=null&&J.date_of_birth)?(n(),u("span",ol,r((K=e.value)==null?void 0:K.date_of_birth[0]),1)):i("",!0)]),l("div",null,[o[11]||(o[11]=l("label",{for:"email",class:"form-label"},"Email Address",-1)),p(l("input",{type:"text",id:"email","onUpdate:modelValue":o[5]||(o[5]=s=>a.value.email=s),class:m(["form-input",e.value&&((Q=e.value)!=null&&Q.email)?"border-red-500":"border-slate-200"]),placeholder:"Enter email"},null,2),[[v,a.value.email]]),e.value&&((W=e.value)!=null&&W.email)?(n(),u("span",rl,r((X=e.value)==null?void 0:X.email[0]),1)):i("",!0)]),l("div",null,[o[12]||(o[12]=l("label",{for:"make",class:"form-label"},"Make (Manufacturer)",-1)),p(l("input",{type:"make",id:"make","onUpdate:modelValue":o[6]||(o[6]=s=>a.value.make=s),class:m(["form-input",e.value&&((ee=e.value)!=null&&ee.make)?"border-red-500":"border-slate-200"]),placeholder:"Enter Manufacturer"},null,2),[[v,a.value.make]]),e.value&&((le=e.value)!=null&&le.make)?(n(),u("span",sl,r((ae=e.value)==null?void 0:ae.make[0]),1)):i("",!0)]),l("div",null,[o[13]||(o[13]=l("label",{for:"model",class:"form-label"},"Model",-1)),p(l("input",{type:"model",id:"model","onUpdate:modelValue":o[7]||(o[7]=s=>a.value.model=s),class:m(["form-input",e.value&&((te=e.value)!=null&&te.model)?"border-red-500":"border-slate-200"]),placeholder:"Enter Manufacturer"},null,2),[[v,a.value.model]]),e.value&&((oe=e.value)!=null&&oe.model)?(n(),u("span",dl,r((re=e.value)==null?void 0:re.model[0]),1)):i("",!0)]),l("div",null,[o[14]||(o[14]=l("label",{for:"year",class:"form-label"},"Year",-1)),p(l("input",{type:"year",id:"year","onUpdate:modelValue":o[8]||(o[8]=s=>a.value.year=s),class:m(["form-input",e.value&&((se=e.value)!=null&&se.year)?"border-red-500":"border-slate-200"]),placeholder:"Enter Year"},null,2),[[v,a.value.year]]),e.value&&((de=e.value)!=null&&de.year)?(n(),u("span",nl,r((ne=e.value)==null?void 0:ne.year[0]),1)):i("",!0)]),l("div",null,[o[15]||(o[15]=l("label",{for:"service_date",class:"form-label"},"Service Date",-1)),p(l("input",{type:"date",id:"service_date","onUpdate:modelValue":o[9]||(o[9]=s=>a.value.service_date=s),class:m(["form-input",e.value&&((ue=e.value)!=null&&ue.service_date)?"border-red-500":"border-slate-200"]),placeholder:"Enter Service Date"},null,2),[[v,a.value.service_date]]),e.value&&((ie=e.value)!=null&&ie.service_date)?(n(),u("span",ul,r((pe=e.value)==null?void 0:pe.service_date[0]),1)):i("",!0)])]),l("button",il,r(t.$t("Update Profile")),1)])])],32)])])}}},fl=be(pl,[["__scopeId","data-v-a948598f"]]);export{fl as default};
