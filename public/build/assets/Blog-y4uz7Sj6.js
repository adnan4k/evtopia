import{D as j,J as P,k as n,L as D,m as M,K as k,h as R,o as r,c as o,a as s,p as E,u,M as F,N as I,b as f,O as T,i as z,t,f as v,F as b,d as q,g as L}from"./app-BfEYhWiw.js";import{_ as O}from"./BlogCard-CGixBLpZ.js";import{b as U}from"./blog-banner-BfFILLUb.js";import"./ArrowRightIcon-BRhmr8wM.js";const H={class:"main-container py-14"},J={class:"w-full bg-white rounded-lg border border-slate-100 p-1 md:p-2 xl:p-3"},K={class:"relative overflow-hidden grow"},A=["placeholder"],G={key:0,class:"flex mt-1 justify-between items-center w-full gap-4 flex-wrap"},Q={key:0},W={key:1},X={key:2},Y={key:1,class:"mt-8 grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-6 items-start"},Z={key:2},ee={class:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 items-start"},te={class:"flex justify-between items-center w-full mt-8 gap-4 flex-wrap"},se={class:"text-slate-800 text-base font-normal leading-normal"},ie={__name:"Blog",setup(ae){const $=j(),p=new P,d=n(1),g=n(12);n(0);const h=n(0),S=n([]),w=n([]),a=D(),c=n({}),y=n(""),_=n(!0);M(()=>{if(c.value={...a.query},!$.multiVendor){p.push("/");return}m(),window.scrollTo(0,0)});const V=async e=>{d.value=e,m()},x=()=>{if(c.value.search=y.value.trim(),c.value.search)p.push({query:{...a.query,search:c.value.search}});else{const{search:e,...l}=a.query;p.push({query:l})}m()},m=async()=>{axios.get("/blogs",{params:{page:d.value,per_page:g.value,filter:c.value}}).then(e=>{h.value=e.data.data.total,w.value=e.data.data.posts}).catch(e=>{console.error("Error fetching blogs:",e)}).finally(()=>{_.value=!1})},B=k(()=>Object.keys(a.query).some(e=>a.query[e])),N=()=>{c.value={},p.push({query:{}}),m()};return k(()=>!!a.query.search),(e,l)=>{const C=R("vue-awesome-paginate");return r(),o(b,null,[s("div",{class:"hero-section bg-cover bg-center h-72 flex items-center justify-center",style:E({backgroundImage:`url(${u(U)})`,backgroundSize:"cover",backgroundPosition:"center"})},l[2]||(l[2]=[s("h1",{class:"text-white text-3xl sm:text-4xl font-bold text-center"},"Evtopia News and Insights",-1)]),4),s("div",H,[s("div",J,[s("div",K,[F(s("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=i=>y.value=i),placeholder:e.$t("Search Blog"),class:"px-2 py-3 block rounded-lg border border-slate-200 focus:border-primary w-full placeholder:text-gray-400 outline-none text-base font-normal leading-normal",onInput:x},null,40,A),[[I,y.value]]),s("button",{class:"bg-primary-600 h-full w-14 border-none absolute right-0 top-0 rounded-r-lg flex items-center justify-center",onClick:x},[f(u(T),{class:"w-6 h-6 text-white"})])])]),B.value?(r(),o("div",G,[s("div",null,[z(t(e.$t("Search Results"))+" ",1),u(a).query.search?(r(),o("span",Q,t(e.$t("for"))+' "'+t(u(a).query.search)+'" ',1)):v("",!0),u(a).query.category_id?(r(),o("span",W,t(e.$t("for category with id"))+' "'+t(u(a).query.category_id)+'" ',1)):v("",!0),u(a).query.tag_id?(r(),o("span",X,t(e.$t("with tag id"))+' "'+t(u(a).query.tag_id)+'" ',1)):v("",!0)]),s("div",null,[s("button",{class:"text-red-500 rounded-lg py-2 px-4 hover:text-red-700 transition duration-300",onClick:N},t(e.$t("Reset Search")),1)])])):v("",!0),_.value?(r(),o("div",Y,[(r(!0),o(b,null,q(g.value,i=>(r(),o("div",{key:`skeleton-${i}`,class:"animate-pulse"},l[3]||(l[3]=[L('<div class="bg-white shadow-md rounded-lg p-4"><div class="h-60 bg-gray-200 rounded"></div><div class="mt-4 h-8 bg-gray-200 rounded"></div><div class="mt-2 h-8 bg-gray-200 rounded"></div><div class="mt-2 h-8 w-3/4 bg-gray-200 rounded"></div></div>',1)])))),128))])):(r(),o("div",Z,[s("div",ee,[(r(!0),o(b,null,q(w.value,i=>(r(),o("div",{key:i.id,class:"w-full"},[f(O,{post:i},null,8,["post"])]))),128))]),s("div",te,[s("div",se,t(e.$t("Showing"))+" "+t(g.value*(d.value-1)+1)+" "+t(e.$t("to"))+" "+t(g.value*(d.value-1)+S.value.length)+" "+t(e.$t("of"))+" "+t(h.value)+" "+t(e.$t("results")),1),s("div",null,[f(C,{"total-items":h.value,"items-per-page":g.value,type:"button","hide-prev-next-when-ends":!0,"max-pages-shown":5,modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=i=>d.value=i),onClick:V},null,8,["total-items","items-per-page","modelValue"])])])]))])],64)}}};export{ie as default};
