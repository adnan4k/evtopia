import{j as I,D as O,E as D,o as v,c as f,a as e,t as o,u as s,_ as A,J as U,P as L,k as b,m as W,M as P,N as G,n as B,b as _,r as J,e as X,a3 as Y,f as j,a0 as K,l as V,h as Q,w as z,a1 as Z,T as M,F as ee,d as te,a2 as oe}from"./app-89Vc9ayq.js";import{a as se,_ as ae}from"./CheckoutShippingAddress-D12cntLE.js";import{r as le}from"./TrashIcon-DHf5i2fF.js";import{r as ne}from"./HomeIcon-ByWIbu43.js";import"./AddressForm-Bp77_pGr.js";import"./AddressFormModal-bxH1W716.js";const re={class:"space-y-4 mt-3 transition duration-300"},de={class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},ie={class:"text-slate-950 text-base font-medium leading-normal"},ce={class:"space-y-2 divide-y divide-slate-200"},ue={class:"flex gap-4 justify-start w-full items-center pt-1"},me={class:"w-[72px] h-[95px]"},pe=["src"],he={class:"flex flex-col gap-1 w-full"},_e={class:"text-primary text-xs font-normal leading-none"},ve={class:"text-slate-950 text-base font-normal leading-normal"},fe={class:"flex flex-wrap justify-between items-center gap-3"},ye={class:"flex items-center gap-1"},be={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},xe={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},ge={class:"text-slate-800 text-base font-normal leading-normal"},we={__name:"BuyNowCheckoutProduct",setup(S){I();const g=O(),t=D();return(y,x)=>{var i,m,a,p,r,d,l,w,c,$,k,n,u;return v(),f("div",re,[e("div",de,[e("div",ie,o((m=(i=s(t).buyNowProduct)==null?void 0:i.shop)==null?void 0:m.name),1),e("div",ce,[e("div",ue,[e("div",me,[e("img",{src:(a=s(t).buyNowProduct)!=null&&a.thumbnail?(p=s(t).buyNowProduct)==null?void 0:p.thumbnail:(d=(r=s(t).buyNowProduct)==null?void 0:r.thumbnails[0])==null?void 0:d.thumbnail,class:"w-full h-full object-contain"},null,8,pe)]),e("div",he,[e("div",_e,o((l=s(t).buyNowProduct)==null?void 0:l.brand),1),e("div",ve,o((w=s(t).buyNowProduct)==null?void 0:w.name),1),e("div",fe,[e("div",ye,[e("div",be,o((c=s(t).buyNowProduct)==null?void 0:c.size),1),e("div",xe,o(($=s(t).buyNowProduct)==null?void 0:$.color),1)]),e("div",ge," 1 X "+o(s(g).showCurrency(((k=s(t).buyNowProduct)==null?void 0:k.discount_price)>0?(n=s(t).buyNowProduct)==null?void 0:n.discount_price:(u=s(t).buyNowProduct)==null?void 0:u.price)),1)])])])])])])}}},$e={class:"p-6 bg-white rounded-2xl border border-slate-200"},Pe={class:"text-slate-950 text-xl font-medium leading-7"},ke={class:"my-4 flex justify-between gap-4"},Ce={class:"text-slate-950 text-base font-normal leading-normal"},Ne={class:"text-slate-950 text-base font-normal leading-normal"},Se={class:"my-4 flex justify-between gap-4"},Me={class:"text-red-500 text-base font-normal leading-normal"},Be={class:"text-slate-950 text-base font-normal leading-normal"},je={class:"my-4 flex justify-between gap-4"},Ie={class:"text-slate-950 text-base font-normal leading-normal"},Oe={class:"text-slate-950 text-base font-normal leading-normal"},De={class:"my-4 flex justify-between gap-4"},Te={class:"text-slate-950 text-base font-normal leading-normal"},Ve={class:"text-slate-950 text-base font-normal leading-normal"},ze={class:"my-4 flex justify-between gap-4"},Ae={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ue={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},We={class:"p-4 mt-6 bg-slate-100 rounded-xl"},Ge={class:"text-black text-base font-normal leading-normal"},Ee={class:"relative mt-2"},Fe=["placeholder"],He={class:"absolute top-1/2 -translate-y-1/2 left-3"},Re={__name:"BuyNowCheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(S){const g=new U,t=D(),y=O(),x=I(),i=L(),m=b(!1),a=b(""),p=S,r=b({total_amount:0,coupon_discount:0,total_payable_amount:0,delivery_charge:0});W(()=>{a.value=t.coupon_code,d()});const d=()=>{t.buyNowProduct&&axios.post("/buy-now",{product_id:t.buyNowProduct.id,coupon_code:a.value,quantity:1},{headers:{Authorization:x.token}}).then(n=>{r.value=n.data.data,m.value=n.data.data.apply_coupon,m.value&&a.value.length>0?(i.success(n.data.message,{position:"bottom-left"}),t.coupon_code=a.value):!m.value&&a.value.length>0&&(i.error(n.data.message,{position:"bottom-left"}),t.coupon_code="")}).catch(n=>{i.error(n.response.data.message,{position:"bottom-left"})})},l=()=>{a.value.length>0&&d()},w=()=>{a.value="",m.value=!1,t.coupon_code="",d()},c={component:K,props:{title:"Order Placed",message:"Your order has been placed successfully."}},$=()=>{if(!t.address){i.error("Please select address");return}if(p.paymentMethod==null){i.error("Please select payment method",{position:"bottom-left"});return}t.buyNowProduct?axios.post("/buy-now/place-order",{product_id:t.buyNowProduct.id,quantity:1,address_id:t.address.id,payment_method:p.paymentMethod,coupon_code:a.value,note:p.note,size:t.buyNowProduct.size??null,color:t.buyNowProduct.color??null},{headers:{Authorization:x.token}}).then(n=>{i(c,{type:"default",hideProgressBar:!0,icon:!1,position:"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),r.value.coupon_discount=0,r.value.total_payable_amount=0,r.value.delivery_charge=0,r.value.total_amount=0,t.buyNowProduct=null,t.coupon_code="";let u=n.data.data.order_payment_url;if(u!=null){k(u);return}else t.showOrderConfirmModal=!0}).catch(()=>{}):i.error("Please select at least one product",{position:"bottom-left"})},k=n=>{let u=700,C=700,E=screen.width/2-u/2,F=screen.height/2-C/2,H="popup,resizable,height="+C+",width="+u+",top="+F+",left="+E,h=window.open(n,null,H);h.title="Payment Window Screen - Make Payment",h.onload=()=>{h.title="Payment Window Screen - Make Payment"},h.focus();var N=setInterval(R,1e3);function R(){try{var T=h.location.pathname.replace(/\/order\/\d+/,"");if(T=="/payment/cancel"){h.close(),clearInterval(N),t.orderPaymentCancelModal=!0,i.error("Sorry! Payment Canceled",{position:"bottom-left"}),g.push({name:"home"});return}if(T=="/payment/success"){h.close(),clearInterval(N),t.showOrderConfirmModal=!0;return}(h.closed||!h)&&(clearInterval(N),h.close(),t.orderPaymentCancelModal=!0,g.push({name:"home"}))}catch{}}setTimeout(()=>{clearInterval(N),h.close()},18e4)};return(n,u)=>(v(),f("div",null,[e("div",$e,[e("div",Pe,o(n.$t("Order Summary")),1),e("div",ke,[e("div",Ce,o(n.$t("Subtotal")),1),e("div",Ne,o(s(y).showCurrency(r.value.total_amount)),1)]),e("div",Se,[e("div",Me,o(n.$t("Discount")),1),e("div",Be," -"+o(s(y).showCurrency(r.value.coupon_discount)),1)]),u[1]||(u[1]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",je,[e("div",Ie,o(n.$t("Subtotal After Discount")),1),e("div",Oe,o(s(y).showCurrency((r.value.total_amount-r.value.coupon_discount).toFixed(2))),1)]),e("div",De,[e("div",Te,o(n.$t("Shipping Charge")),1),e("div",Ve,o(s(y).showCurrency(r.value.delivery_charge)),1)]),u[2]||(u[2]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",ze,[e("div",Ae,o(n.$t("Total Payable")),1),e("div",Ue,o(s(y).showCurrency(r.value.total_payable_amount)),1)]),e("div",We,[e("div",Ge,o(n.$t("Have a coupon"))+"? ",1),e("div",Ee,[P(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=C=>a.value=C),class:B(["formInputCoupon pr-14 p-3",m.value?"text-green-500 pl-10":""]),placeholder:n.$t("Enter coupon code")},null,10,Fe),[[G,a.value]]),m.value?(v(),f("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:w},[_(s(le),{class:"w-6 h-6 text-red-500"})])):(v(),f("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:l},[_(s(J),{class:"w-6 h-6 text-white"})])),e("span",He,[m.value?(v(),X(s(Y),{key:0,class:"w-6 h-6 text-green-500"})):j("",!0)])])])]),e("button",{class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:$}," Place Order "),_(se)]))}},qe=A(Re,[["__scopeId","data-v-50c5e5c8"]]),Le={class:"main-container"},Je={class:"flex items-center gap-2 overflow-hidden pt-4"},Xe={class:"grow w-full overflow-hidden"},Ye={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},Ke={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},Qe={class:"col-span-1 xl:col-span-2"},Ze={class:"flex gap-2 justify-between items-center"},et={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},tt={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},ot={key:0},st={class:"mt-6"},at={class:"mb-1"},lt={class:"text-slate-950 text-xl font-medium leading-7"},nt={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},rt=["placeholder"],dt={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},it={class:"text-slate-950 text-xl font-medium leading-7"},ct={class:"mt-4 flex flex-wrap gap-4"},ut={for:"cash",class:"flex items-center gap-4 xl:min-w-80"},mt={class:"text-slate-500 text-base font-normal leading-normal"},pt={for:"card",class:"flex items-center gap-4 xl:min-w-80"},ht={class:"text-slate-500 text-base font-normal leading-normal"},_t={key:0,class:"mt-5 border-t border-slate-200"},vt={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},ft={class:"mt-3 flex flex-wrap gap-4"},yt=["for"],bt=["id","value"],xt={class:""},gt=["src"],wt={__name:"BuyNow",setup(S){const g=new U,t=I(),y=O(),x=D(),i=b(!0),m=b(""),a=b("cash"),p=b(null),r=b(null);return W(()=>{window.scrollTo(0,0),x.coupon_code="",p.value=a.value,t.user||g.push({name:"home"})}),V(a,()=>{a.value==="card"?p.value=r.value:p.value=a.value}),V(r,()=>{a.value==="card"&&(p.value=r.value)}),(d,l)=>{const w=Q("router-link");return v(),f("div",Le,[e("div",Je,[_(w,{to:"/",class:"w-6 h-6"},{default:z(()=>[_(s(ne),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",Xe,[e("div",Ye,[e("span",null,o(d.$t("Home")),1),l[5]||(l[5]=e("span",null,"/",-1)),e("span",null,o(d.$t("Cart")),1),l[6]||(l[6]=e("span",null,"/",-1)),e("span",null,o(d.$t("Checkout")),1)])])]),e("div",Ke,[e("div",Qe,[e("div",{class:B(["py-4 border-b tran",i.value?"border-primary":"border-slate-200"])},[e("div",Ze,[e("div",et,o(d.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:l[0]||(l[0]=c=>i.value=!i.value)},[e("div",tt," ("+o(s(x).buyNowProduct?1:0)+" "+o(d.$t("items"))+") ",1),_(s(Z),{class:B(["w-5 h-5 text-primary-600 transition duration-300",i.value?"rotate-180":""])},null,8,["class"])])]),i.value&&s(x).buyNowProduct?(v(),f("div",ot,[_(we)])):j("",!0)],2),_(ae),e("div",st,[e("div",at,[e("span",lt,o(d.$t("Note")),1),e("span",nt," ("+o(d.$t("Optional"))+") ",1)]),P(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=c=>m.value=c),rows:"3",class:"form-input",placeholder:d.$t("Write your note here")+"..."},null,8,rt),[[G,m.value]])]),e("div",dt,[e("div",it,o(d.$t("Payment Method")),1),e("div",ct,[e("label",ut,[P(e("input",{"onUpdate:modelValue":l[2]||(l[2]=c=>a.value=c),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[M,a.value]]),l[7]||(l[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",mt,o(d.$t("Cash on delivery")),1)]),e("label",pt,[P(e("input",{"onUpdate:modelValue":l[3]||(l[3]=c=>a.value=c),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[M,a.value]]),l[8]||(l[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",ht,o(d.$t("Credit or Debit Card")),1)])]),_(oe,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:z(()=>[a.value==="card"?(v(),f("div",_t,[e("span",vt,o(d.$t("Available Payment Gateways")),1),e("div",ft,[(v(!0),f(ee,null,te(s(y).paymentGateways,c=>(v(),f("label",{key:c.id,for:c.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[P(e("input",{"onUpdate:modelValue":l[4]||(l[4]=$=>r.value=$),id:c.name,name:"paymentGateway",type:"radio",class:"sr-only",value:c.name},null,8,bt),[[M,r.value]]),e("div",xt,[e("img",{src:c.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,gt)])],8,yt))),128))])])):j("",!0)]),_:1})])]),_(qe,{note:m.value,paymentMethod:p.value},null,8,["note","paymentMethod"])])])}}},Mt=A(wt,[["__scopeId","data-v-31bb2475"]]);export{Mt as default};
